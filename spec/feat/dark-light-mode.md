# æ·±è‰²/æ·ºè‰²æ¨¡å¼åˆ‡æ› åŠŸèƒ½è¦æ ¼æ›¸

## 1. åŠŸèƒ½æ¦‚è¿°
å…è¨±ç”¨æˆ¶æ–¼ App å…§åˆ‡æ›æ·±è‰²æ¨¡å¼ï¼ˆDark Modeï¼‰èˆ‡æ·ºè‰²æ¨¡å¼ï¼ˆLight Modeï¼‰ï¼Œæå‡ä¸åŒç’°å¢ƒä¸‹çš„ä½¿ç”¨é«”é©—ã€‚

## 2. ç¾æ³åˆ†æ

### 2.1 ç›®å‰ç‹€æ…‹
- ä»‹é¢åƒ…æ”¯æ´æ·±è‰²æ¨¡å¼ï¼ˆDark Modeï¼‰
- é¡è‰²ç‚ºç¡¬ç·¨ç¢¼ï¼ˆhardcodedï¼‰ï¼Œå¦‚ï¼š
  - èƒŒæ™¯è‰²ï¼š`Color(red: 24/255, green: 26/255, blue: 32/255)`
  - å¡ç‰‡åº•è‰²ï¼š`Color(red: 35/255, green: 38/255, blue: 47/255)`
  - æ–‡å­—ï¼šç™½è‰²ã€ç°è‰²

### 2.2 éœ€æ”¹å–„é …ç›®
- æ–°å¢æ·ºè‰²æ¨¡å¼é…è‰²æ–¹æ¡ˆ
- å»ºç«‹çµ±ä¸€çš„é¡è‰²ç®¡ç†ç³»çµ±
- æ–°å¢åˆ‡æ›æŒ‰éˆ•
- å„²å­˜ç”¨æˆ¶åå¥½è¨­å®š

---

## 3. UI è¨­è¨ˆ

### 3.1 åˆ‡æ›æŒ‰éˆ•ä½ç½®
- **ä½ç½®**ï¼šé¦–é å³ä¸Šè§’ï¼ˆåˆ·æ–°æŒ‰éˆ•å·¦å´ï¼‰
- **å…ƒä»¶**ï¼šåœ–ç¤ºæŒ‰éˆ•ï¼ˆIcon Buttonï¼‰
- **åœ–ç¤º**ï¼š
  - æ·±è‰²æ¨¡å¼ä¸‹é¡¯ç¤ºï¼š`sun.max.fill`ï¼ˆé»æ“Šåˆ‡æ›ç‚ºæ·ºè‰²ï¼‰
  - æ·ºè‰²æ¨¡å¼ä¸‹é¡¯ç¤ºï¼š`moon.fill`ï¼ˆé»æ“Šåˆ‡æ›ç‚ºæ·±è‰²ï¼‰

### 3.2 Header ä½ˆå±€èª¿æ•´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MYTESLA          â˜€ï¸  ğŸ”„  Hi, Nick                  â”‚
â”‚                   ^   ^                             â”‚
â”‚                   â”‚   â””â”€â”€ åˆ·æ–°æŒ‰éˆ•ï¼ˆç¾æœ‰ï¼‰            â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€ æ¨¡å¼åˆ‡æ›æŒ‰éˆ•ï¼ˆæ–°å¢ï¼‰        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. é…è‰²æ–¹æ¡ˆ

### 4.1 æ·±è‰²æ¨¡å¼ï¼ˆDark Modeï¼‰- ç¾æœ‰
| å…ƒç´  | é¡è‰² | RGB |
|------|------|-----|
| ä¸»èƒŒæ™¯ | æ·±è—ç° | `(24, 26, 32)` |
| å¡ç‰‡/è¡¨æ ¼åº•è‰² | æ·±ç° | `(35, 38, 47)` |
| è¡¨æ ¼äº¤æ›¿è¡Œ | è¼ƒæ·±ç° | `(27, 29, 35)` |
| ä¸»è¦æ–‡å­— | ç™½è‰² | `(255, 255, 255)` |
| æ¬¡è¦æ–‡å­— | ç°è‰² | `.gray` |
| å¼·èª¿è‰² | Tesla ç´… | `(232, 33, 39)` |
| æŒ‰éˆ•è‰² | ç´«è—è‰² | `(94, 96, 206)` |

### 4.2 æ·ºè‰²æ¨¡å¼ï¼ˆLight Modeï¼‰- æ–°å¢
| å…ƒç´  | é¡è‰² | RGB |
|------|------|-----|
| ä¸»èƒŒæ™¯ | æ·ºç°ç™½ | `(245, 245, 250)` |
| å¡ç‰‡/è¡¨æ ¼åº•è‰² | ç™½è‰² | `(255, 255, 255)` |
| è¡¨æ ¼äº¤æ›¿è¡Œ | æ·ºç° | `(248, 248, 250)` |
| ä¸»è¦æ–‡å­— | æ·±ç°é»‘ | `(28, 28, 30)` |
| æ¬¡è¦æ–‡å­— | ä¸­ç° | `(142, 142, 147)` |
| å¼·èª¿è‰² | Tesla ç´… | `(232, 33, 39)` |
| æŒ‰éˆ•è‰² | ç´«è—è‰² | `(94, 96, 206)` |

---

## 5. æŠ€è¡“å¯¦ä½œå»ºè­°

### 5.1 æ–°å¢æª”æ¡ˆ
- `AppTheme.swift`ï¼šçµ±ä¸€ç®¡ç†é¡è‰²èˆ‡ä¸»é¡Œè¨­å®š

### 5.2 ä¿®æ”¹æª”æ¡ˆ
- `ContentView.swift`ï¼šåŠ å…¥åˆ‡æ›æŒ‰éˆ•ã€å¥—ç”¨ä¸»é¡Œé¡è‰²
- `StatisticsView.swift`ï¼šå¥—ç”¨ä¸»é¡Œé¡è‰²
- `AddChargeRecordView.swift`ï¼šå¥—ç”¨ä¸»é¡Œé¡è‰²
- `my_tesla_appApp.swift`ï¼šåˆå§‹åŒ–ä¸»é¡Œè¨­å®š

### 5.3 é¡è‰²ç®¡ç†æ¶æ§‹

```swift
// AppTheme.swift

import SwiftUI

enum AppThemeMode: String {
    case dark
    case light
}

class AppTheme: ObservableObject {
    static let shared = AppTheme()
    
    @Published var mode: AppThemeMode {
        didSet {
            UserDefaults.standard.set(mode.rawValue, forKey: "appThemeMode")
        }
    }
    
    init() {
        let savedMode = UserDefaults.standard.string(forKey: "appThemeMode") ?? "dark"
        self.mode = AppThemeMode(rawValue: savedMode) ?? .dark
    }
    
    // MARK: - èƒŒæ™¯è‰²
    var backgroundColor: Color {
        switch mode {
        case .dark:
            return Color(red: 24/255, green: 26/255, blue: 32/255)
        case .light:
            return Color(red: 245/255, green: 245/255, blue: 250/255)
        }
    }
    
    // MARK: - å¡ç‰‡åº•è‰²
    var cardBackgroundColor: Color {
        switch mode {
        case .dark:
            return Color(red: 35/255, green: 38/255, blue: 47/255)
        case .light:
            return Color.white
        }
    }
    
    // MARK: - è¡¨æ ¼äº¤æ›¿è¡Œåº•è‰²
    var tableAlternateRowColor: Color {
        switch mode {
        case .dark:
            return Color(red: 27/255, green: 29/255, blue: 35/255)
        case .light:
            return Color(red: 248/255, green: 248/255, blue: 250/255)
        }
    }
    
    // MARK: - ä¸»è¦æ–‡å­—è‰²
    var primaryTextColor: Color {
        switch mode {
        case .dark:
            return .white
        case .light:
            return Color(red: 28/255, green: 28/255, blue: 30/255)
        }
    }
    
    // MARK: - æ¬¡è¦æ–‡å­—è‰²
    var secondaryTextColor: Color {
        switch mode {
        case .dark:
            return .gray
        case .light:
            return Color(red: 142/255, green: 142/255, blue: 147/255)
        }
    }
    
    // MARK: - åˆ‡æ›æ¨¡å¼
    func toggle() {
        mode = mode == .dark ? .light : .dark
    }
    
    // MARK: - åˆ‡æ›æŒ‰éˆ•åœ–ç¤º
    var toggleIcon: String {
        switch mode {
        case .dark:
            return "sun.max.fill"
        case .light:
            return "moon.fill"
        }
    }
}
```

### 5.4 ContentView ä¿®æ”¹ç¯„ä¾‹

```swift
// ContentView.swift

struct ContentView: View {
    @ObservedObject private var theme = AppTheme.shared
    // ... å…¶ä»– @State è®Šæ•¸
    
    var body: some View {
        ZStack {
            theme.backgroundColor
                .ignoresSafeArea()
            // ... å…¶ä»–å…§å®¹
        }
    }
    
    private var headerSection: some View {
        HStack {
            Text("MYTESLA")
                .font(.system(size: 24, weight: .bold))
                .foregroundColor(Color(red: 232/255, green: 33/255, blue: 39/255))
            Spacer()
            
            // æ–°å¢ï¼šæ¨¡å¼åˆ‡æ›æŒ‰éˆ•
            Button(action: {
                withAnimation(.easeInOut(duration: 0.3)) {
                    theme.toggle()
                }
            }) {
                Image(systemName: theme.toggleIcon)
                    .font(.system(size: 18, weight: .bold))
                    .foregroundColor(.orange)
            }
            .padding(.trailing, 4)
            
            // ç¾æœ‰ï¼šåˆ·æ–°æŒ‰éˆ•
            Button(action: {
                viewModel.manualRefresh()
            }) {
                Image(systemName: "arrow.clockwise")
                    .font(.system(size: 18, weight: .bold))
                    .foregroundColor(.blue)
            }
            .padding(.trailing, 8)
            
            Text("Hi, Nick")
                .foregroundColor(theme.secondaryTextColor)
                .font(.system(size: 16))
        }
        .padding(.horizontal, 4)
        .padding(.top, 8)
    }
}
```

---

## 6. ä½¿ç”¨è€…æµç¨‹ï¼ˆUser Flowï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¦–é ï¼ˆæ·±è‰²æ¨¡å¼ï¼‰                          â”‚
â”‚                                                             â”‚
â”‚   MYTESLA                    â˜€ï¸  ğŸ”„  Hi, Nick               â”‚
â”‚                              ^                              â”‚
â”‚                              â”‚                              â”‚
â”‚                              é»æ“Šå¤ªé™½åœ–ç¤º                    â”‚
â”‚                              â–¼                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¦–é ï¼ˆæ·ºè‰²æ¨¡å¼ï¼‰                          â”‚
â”‚                                                             â”‚
â”‚   MYTESLA                    ğŸŒ™  ğŸ”„  Hi, Nick               â”‚
â”‚                              ^                              â”‚
â”‚                              â”‚                              â”‚
â”‚                              é»æ“Šæœˆäº®åœ–ç¤º                    â”‚
â”‚                              â–¼                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    å›åˆ°æ·±è‰²æ¨¡å¼ï¼ˆå¾ªç’°ï¼‰
```

---

## 7. å„²å­˜æ©Ÿåˆ¶

| é …ç›® | èªªæ˜ |
|------|------|
| å„²å­˜æ–¹å¼ | UserDefaults |
| Key | `appThemeMode` |
| å€¼ | `"dark"` æˆ– `"light"` |
| é è¨­å€¼ | `"dark"`ï¼ˆç¶­æŒç¾æœ‰é«”é©—ï¼‰ |
| ç”Ÿæ•ˆæ™‚æ©Ÿ | å³æ™‚åˆ‡æ›ï¼ŒApp é‡å•Ÿå¾Œä¿ç•™ |

---

## 8. å‹•ç•«æ•ˆæœ

- åˆ‡æ›æ™‚ä½¿ç”¨ `withAnimation(.easeInOut(duration: 0.3))` æä¾›å¹³æ»‘éæ¸¡
- é¡è‰²æ¼¸è®Šæ•ˆæœå¢å¼·ä½¿ç”¨é«”é©—

---

## 9. æ¸¬è©¦æ¡ˆä¾‹

| æ¸¬è©¦é …ç›® | é æœŸçµæœ |
|---------|---------|
| é»æ“Šåˆ‡æ›æŒ‰éˆ•ï¼ˆæ·±è‰² â†’ æ·ºè‰²ï¼‰ | ä»‹é¢åˆ‡æ›ç‚ºæ·ºè‰²æ¨¡å¼ï¼Œåœ–ç¤ºè®Šç‚ºæœˆäº® |
| é»æ“Šåˆ‡æ›æŒ‰éˆ•ï¼ˆæ·ºè‰² â†’ æ·±è‰²ï¼‰ | ä»‹é¢åˆ‡æ›ç‚ºæ·±è‰²æ¨¡å¼ï¼Œåœ–ç¤ºè®Šç‚ºå¤ªé™½ |
| åˆ‡æ›å¾Œé‡å•Ÿ App | æ¨¡å¼è¨­å®šä¿ç•™ï¼Œç„¡éœ€é‡æ–°é¸æ“‡ |
| æ·±è‰²æ¨¡å¼æ‰€æœ‰é é¢ | èƒŒæ™¯ã€å¡ç‰‡ã€æ–‡å­—é¡è‰²æ­£ç¢º |
| æ·ºè‰²æ¨¡å¼æ‰€æœ‰é é¢ | èƒŒæ™¯ã€å¡ç‰‡ã€æ–‡å­—é¡è‰²æ­£ç¢º |
| æ–°å¢å……é›»ç´€éŒ„è¡¨å–® | ä¸»é¡Œé¡è‰²æ­£ç¢ºå¥—ç”¨ |
| çµ±è¨ˆé é¢ | ä¸»é¡Œé¡è‰²æ­£ç¢ºå¥—ç”¨ |
| åˆ‡æ›å‹•ç•« | å¹³æ»‘éæ¸¡ï¼Œç„¡é–ƒçˆ |

---

## 10. UI/UX æ³¨æ„äº‹é …

- é è¨­ç¶­æŒæ·±è‰²æ¨¡å¼ï¼Œä¿æŒç¾æœ‰ç”¨æˆ¶é«”é©—ä¸€è‡´æ€§
- åˆ‡æ›æŒ‰éˆ•ä½ç½®å›ºå®šï¼Œæ˜“æ–¼ç™¼ç¾èˆ‡æ“ä½œ
- åœ–ç¤ºèªæ„æ˜ç¢ºï¼šå¤ªé™½ = åˆ‡æ›åˆ°äº®ã€æœˆäº® = åˆ‡æ›åˆ°æš—
- æ‰€æœ‰é é¢ï¼ˆå« Sheetã€Modalï¼‰éœ€çµ±ä¸€å¥—ç”¨ä¸»é¡Œ
- åœ–è¡¨ã€æŒ‰éˆ•å¼·èª¿è‰²ï¼ˆTesla ç´…ã€ç´«è—è‰²ï¼‰åœ¨å…©ç¨®æ¨¡å¼ä¸‹ä¿æŒä¸€è‡´

---

## 11. å„ªå…ˆç´š

- **P0ï¼ˆå¿…é ˆï¼‰**ï¼šåˆ‡æ›æŒ‰éˆ•ã€èƒŒæ™¯è‰²ã€å¡ç‰‡è‰²ã€ä¸»è¦æ–‡å­—è‰²
- **P1ï¼ˆé‡è¦ï¼‰**ï¼šè¡¨æ ¼äº¤æ›¿è¡Œã€æ¬¡è¦æ–‡å­—è‰²ã€å„²å­˜åå¥½
- **P2ï¼ˆæ¬¡è¦ï¼‰**ï¼šå‹•ç•«æ•ˆæœã€ç³»çµ±æ¨¡å¼è‡ªå‹•è·Ÿéš¨ï¼ˆæœªä¾†æ“´å……ï¼‰

---

## 12. æœªä¾†æ“´å……

- æ”¯æ´ã€Œè·Ÿéš¨ç³»çµ±ã€æ¨¡å¼ï¼ˆè‡ªå‹•åµæ¸¬ iOS æ·±æ·ºè‰²è¨­å®šï¼‰
- æ”¯æ´æ›´å¤šä¸»é¡Œè‰²å½©ï¼ˆå¦‚ Tesla è—ã€Tesla ç™½ï¼‰
- æ”¯æ´ Widget ä¸»é¡ŒåŒæ­¥

---

## 13. ç›¸é—œæ–‡ä»¶

- [PRD.md](../PRD.md)ï¼šç”¢å“ä¸»è¦è¦æ ¼æ›¸
- [CHANGELOG.md](../CHANGELOG.md)ï¼šç‰ˆæœ¬è®Šæ›´ç´€éŒ„
- [æ‰‹å‹•æ–°å¢å……é›»ç´€éŒ„.md](æ‰‹å‹•æ–°å¢å……é›»ç´€éŒ„.md)ï¼šæ‰‹å‹•æ–°å¢å……é›»ç´€éŒ„åŠŸèƒ½è¦æ ¼
